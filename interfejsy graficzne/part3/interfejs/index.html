<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body class="main-page">
    <header>
        <h1>Ticker Hero</h1>
    </header>
    <nav>
        <ul>
            <li><a href="Konto.html">Konto</a></li>
            <li><a href="index.html">Szukaj koncertów</a></li>
            <li><a>Koncerty w twojej okolicy</a></li>
        </ul>
    </nav>
    <aside>
        <h2>Filtry</h2>
        <ul>
            <li class="dropdown">
                Artysta
                <ul class="submenu">
                    <li>
                        <input id="artistInput" type="text" placeholder="Wpisz artystę">
                    </li>
                </ul>
            </li>
            <li class="dropdown">
                Miasto
                <ul class="submenu">
                    <li>
                        <input id="cityInput" type="text" placeholder="Wpisz miasto">
                    </li>
                </ul>
            </li>
            <li class="dropdown">
                Gatunek
                <ul class="submenu">
                    <li> <input type="checkbox" value="Pop"> Pop</li>
                    <li> <input type="checkbox" value="Rock"> Rock</li>
                    <li> <input type="checkbox" value="Techno"> Techno</li>
                </ul>
            </li>
            <li class="dropdown">
                Cena
                <ul class="submenu">
                    <li>Od:<input id="priceMin" type="number"></li>
                    <li>Do:<input id="priceMax" type="number"></li>
                </ul>
            </li>
            <p></p>
            <a href="#" id="searchButton"
                style="padding:10px 15px; background:#1e90ff; color:white; border-radius:8px; text-decoration:none;">
                Szukaj
            </a>
            <a href="#" id="clearFilters"
                style="padding:10px 15px; background:#ff4d4d; color:white; border-radius:8px; text-decoration:none; margin-left:10px;">
                Wyczyść filtry
            </a>
        </ul>
    </aside>
    <main id="concertList">
        <section data-artist="Freddie Mercury" data-city="Łódź" data-genre="Rock" data-price="150">
            <h1>Freddie Mercury Rock-Operowo przy świecach</h1>
            <img src="https://www.ebilet.pl/media/cms/media/xrhpj4s5/freddie-mercury-opera-show-552x736-px-e2f617db-f1c6-4e8d-a457-635fc1b031af.webp"
                alt="Plakat koncertu: Freddie Mercury Rock-Operowo przy świecach">
            <p>
                Nowe, niezwykłe spojrzenie na utwory wyjątkowego wokalisty zespołu Queen. Piosenki jednego z
                najpopularniejszych wokalistów rockowych na świecie zostały zaaranżowane w unikalny sposób na
                wokalistów operowych oraz fortepian. Bilety na koncert Freddie Mercury Rock-Operowo przy świecach
                już w sprzedaży.
            </p>
            <a href="koncert.html"
                style="padding:10px 15px; background:#1e90ff; color:white; border-radius:8px; text-decoration:none;">
                Zobacz szczegóły
            </a>
        </section>
        <section data-artist="Michał Wiśniewski" data-city="Kraków" data-genre="Techno" data-price="700">
            <h1>Michał Wiśniewski Akustycznie</h1>
            <img src="https://www.ebilet.pl/media/cms/media/msundxlx/552x736-572dbcc9-1658-6521-e1a4-683e025dca76-86ed122f-6ff1-4558-bf24-dde28dfe1922.webp"
                alt="Plakat koncertu: Michał Wiśniewski Akustycznie">
            <p>
                Przed nami kolejne odsłony akustycznych koncertów Michała Wiśniewskiego - bilety już dostępne!
                Usłyszymy na nich największe przeboje Michała i zespołu Ich Troje, takie jak "Powiedz", "Zawsze z Tobą
                chciałbym być", "Kochaj mnie Kochaj" czy "Keine Grenzen", a także szereg utworów, które są rzadziej
                wykonywane na żywo, jak "Nienawiść", "Czekanie", "Papierosy, wóda, sex", czy "Zawsze naprzód nigdy
                wstecz". A wszystko to w specjalnych, akustycznych aranżacjach! Te koncerty z pewnością pozostaną na
                długo w pamięci każdego, kto postanowi udać się na te muzyczne wydarzenie!
            </p>
            <a href="koncert.html"
                style="padding:10px 15px; background:#1e90ff; color:white; border-radius:8px; text-decoration:none;">
                Zobacz szczegóły
            </a>
        </section>
        <section data-artist="Piotr Rubik" data-city="Poznań" data-genre="Pop" data-price="300">
            <h1>Piotr Rubik „Świat się nie kończy..."</h1>
            <div>
                <img src="https://www.ebilet.pl/media/cms/media/2gqbfdqf/rubik_swiat_656x369-1-6b92428f-6a83-446c-949f-4b3c0f134fd5.webp"
                    alt="Plakat koncertu: Piotr Rubik „Świat się nie kończy..."">
                <p>
                    Piotr Rubik wyrusza w kolejną trasę koncertową! „Świat się nie kończy” to wyjątkowe, pełne energii, miłości oraz pozytywnych emocji kompozycje Piotra. Podczas koncertów nie zabraknie największych przebojów, nowych aranżacji czy wyjątkowych opowieści. Bilety na wydarzenie Piotr Rubik "
                    Świat się nie kończy..." już w sprzedaży. </p>
            </div>
            <a href="koncert.html"
                style="padding:10px 15px; background:#1e90ff; color:white; border-radius:8px; text-decoration:none;">
                Zobacz szczegóły
            </a>
        </section>

        <section data-artist="Maryla Rodowicz" data-city="Warszawa" data-genre="Pop" data-price="400">
            <h1>Maryla Rodowicz – Największe Przeboje na Żywo</h1>
            <img src="https://biletyna.pl/file/get/id/173202"
                alt="Plakat koncertu: Freddie Mercury Rock-Operowo przy świecach" width="300">

            <p>
                Niezapomniana legenda polskiej sceny wraca z wyjątkowym koncertem w Warszawie, podczas którego usłyszysz
                największe
                przeboje Maryli Rodowicz w nowych, energetycznych aranżacjach. To niepowtarzalna okazja, aby przeżyć
                wieczór pełen emocji, wspólnego śpiewania i wyjątkowej atmosfery, którą potrafi stworzyć tylko Maryla.
                Bilety na koncert są już dostępne już od 300zł!
            </p>

            <a href="koncert.html"
                style="padding:10px 15px; background:#1e90ff; color:white; border-radius:8px; text-decoration:none;">
                Zobacz szczegóły
            </a>
        </section>

    </main>
    <script>
        const searchBtn = document.getElementById("searchButton");
        const clearBtn = document.getElementById("clearFilters");

        const artistInput = document.getElementById("artistInput");
        const cityInput = document.getElementById("cityInput");
        const priceMin = document.getElementById("priceMin");
        const priceMax = document.getElementById("priceMax");

        const checkboxes = document.querySelectorAll(".dropdown input[type='checkbox']");
        const concerts = document.querySelectorAll("main section");

        function applyFilters() {
            const artistVal = artistInput.value.toLowerCase();
            const cityVal = cityInput.value.toLowerCase();
            const minVal = priceMin.value ? parseFloat(priceMin.value) : 0;
            const maxVal = priceMax.value ? parseFloat(priceMax.value) : Infinity;

            const selectedGenres = [...checkboxes]
                .filter(cb => cb.checked)
                .map(cb => cb.value.toLowerCase());

            concerts.forEach(section => {
                const artist = section.dataset.artist.toLowerCase();
                const city = section.dataset.city.toLowerCase();
                const price = parseFloat(section.dataset.price);
                const genres = section.dataset.genre.toLowerCase();

                let show = true;

                if (artistVal && !artist.includes(artistVal)) show = false;

                if (cityVal && !city.includes(cityVal)) show = false;

                if (selectedGenres.length > 0) {
                    let match = selectedGenres.some(g => genres.includes(g));
                    if (!match) show = false;
                }

                if (price < minVal || price > maxVal) show = false;

                section.style.display = show ? "" : "none";
            });
        }

        searchBtn.addEventListener("click", e => {
            e.preventDefault();
            applyFilters();
        });

        clearBtn.addEventListener("click", e => {
            e.preventDefault();

            artistInput.value = "";
            cityInput.value = "";
            priceMin.value = "";
            priceMax.value = "";
            checkboxes.forEach(cb => cb.checked = false);

            concerts.forEach(section => {
                section.style.display = "";
            });
        });
    </script>

    <script>
        const concertSections = document.querySelectorAll("main section");

        concertSections.forEach((section, index) => {
            const concertId = index + 1;

            section.dataset.id = concertId;

            const detailsLink = section.querySelector("a[href*='koncert']");
            if (detailsLink) {
                detailsLink.href = `koncert.html?id=${concertId}`;
            }
        });
    </script>

</body>

</html>